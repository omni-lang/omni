// Comprehensive test for std.file module
import std

func main():int {
    let path:string = "std_file_temp.txt"
    let handle:int = std.file.open(path, "w+")
    if handle < 0 {
        return -1
    }

    let expected:int = std.string.length("hello")
    let written:int = std.file.write(handle, "hello", expected)
    if written != expected {
        std.file.close(handle)
        std.os.remove(path)
        return -2
    }

    let seek_result:int = std.file.seek(handle, 0, 0)
    if seek_result != 0 {
        std.file.close(handle)
        std.os.remove(path)
        return -3
    }

    let read_result:int = std.file.read(handle, "buffer", expected)
    if read_result != expected {
        std.file.close(handle)
        std.os.remove(path)
        return -4
    }

    let tell_result:int = std.file.tell(handle)
    if tell_result != expected {
        std.file.close(handle)
        std.os.remove(path)
        return -5
    }

    let close_result:int = std.file.close(handle)
    if close_result != 0 {
        std.os.remove(path)
        return -6
    }

    let exists:int = std.file.exists(path)
    if exists != 1 {
        std.os.remove(path)
        return -7
    }

    let size:int = std.file.size(path)
    if size != expected {
        std.os.remove(path)
        return -8
    }

    let remove_ok:bool = std.os.remove(path)
    if !remove_ok {
        return -9
    }

    let exists_after:int = std.file.exists(path)
    if exists_after != 0 {
        return -10
    }

    return 0
}
