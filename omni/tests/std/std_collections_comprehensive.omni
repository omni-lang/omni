// Comprehensive test for std.collections module
import std

func main():int {
    // Create test maps
    let scores:map<string, int> = {"alice": 95, "bob": 87, "charlie": 92}
    let ages:map<string, int> = {"alice": 25, "bob": 30}
    
    // Test basic map operations
    let size1:int = std.collections.size(scores)     // Should be 3
    let size2:int = std.collections.size(ages)       // Should be 2
    
    // Test map access
    let alice_score:int = std.collections.get(scores, "alice")    // Should be 95
    let bob_score:int = std.collections.get(scores, "bob")        // Should be 87
    let charlie_age:int = std.collections.get(ages, "charlie")    // Should be 0 (default)
    
    // Test map checking
    let has_alice:bool = std.collections.has(scores, "alice")     // Should be true
    let has_david:bool = std.collections.has(scores, "david")     // Should be false
    
    // Test map modification
    let new_scores:map<string, int> = std.collections.set(scores, "david", 88)
    let new_size:int = std.collections.size(new_scores)           // Should be 4
    
    // Test map operations
    let keys:array<string> = std.collections.keys(scores)         // Should be ["alice", "bob", "charlie"]
    let values:array<int> = std.collections.values(scores)        // Should be [95, 87, 92]
    let keys_len:int = std.array.length(keys)                     // Should be 3
    let values_len:int = std.array.length(values)                 // Should be 3
    
    // Test map copying
    let copied_scores:map<string, int> = std.collections.copy(scores)
    let copied_size:int = std.collections.size(copied_scores)     // Should be 3
    
    // Test map merging
    let merged:map<string, int> = std.collections.merge(scores, ages)
    let merged_size:int = std.collections.size(merged)            // Should be 5 (3 + 2, no duplicates)
    
    // Test map removal
    let removed:bool = std.collections.remove(new_scores, "david")  // Should be true
    let final_size:int = std.collections.size(new_scores)           // Should be 3
    
    // Return a combination of results to verify all functions work
    // We'll return: size1 + size2 + alice_score + bob_score + (has_alice ? 1 : 0) + keys_len
    let result:int = size1 + size2 + alice_score + bob_score + (has_alice ? 1 : 0) + keys_len
    return result  // Should be 3 + 2 + 95 + 87 + 1 + 3 = 191
}
